import "http://www.eclipse.org/emf/2002/Ecore"
import "platform:/resource/SimpleNetwork/model/SimpleNetwork.ecore"

rule createNetworkOnly() {
	++ net: Network
}

rule createDeviceOnly() {
	net: Network {
		++ -devices -> dev
	}

	++ dev: Device
}

rule createDevice() {
	net: Network {
		++ -devices -> dev
	}

	++ dev: Device
}
when devNotThere

pattern findDevice {
	net: Network {
		-devices -> dev
	}

	dev: Device
}

condition devNotThere = forbid findDevice
